[Mode_7_Test-0000.png](https://zh.wikipedia.org/wiki/File:Mode_7_Test-0000.png "fig:Mode_7_Test-0000.png")

**Mode
7**是[电子游戏机](https://zh.wikipedia.org/wiki/电子游戏机 "wikilink")[超级任天堂一種](https://zh.wikipedia.org/wiki/超级任天堂 "wikilink")[图形方式](https://zh.wikipedia.org/wiki/电脑显示标准 "wikilink")，可让逐扫描线式的背景层支持旋转与缩放，以此创造大量的不同效果。\[1\]其中最著名的效果是，通过缩放和旋转背景层来显示透视效果。这种将高度改为深度的变换，将背景层变为二维水平[材质贴图平面](https://zh.wikipedia.org/wiki/材质贴图 "wikilink")。如此便可显示三维图形的效果。

[Mega
Drive的扩展](https://zh.wikipedia.org/wiki/Mega_Drive "wikilink")[Mega
CD以及](https://zh.wikipedia.org/wiki/Mega_CD "wikilink")[Atari
Lynx使用了相似的功能](https://zh.wikipedia.org/wiki/Atari_Lynx "wikilink")。

## 使用

Mode 7方式渲染通常用于2D性能强劲，但不专门支持3D的旧系统。著名Mode
7游戏有超级任天堂作品《[F-Zero](https://zh.wikipedia.org/wiki/F-Zero_\(游戏\) "wikilink")》、《[天地创造](https://zh.wikipedia.org/wiki/天地创造 "wikilink")》、《[飞行俱乐部](https://zh.wikipedia.org/wiki/飞行俱乐部 "wikilink")》、《[Yoshi's
Road
Hunting](https://zh.wikipedia.org/wiki/Yoshi's_Road_Hunting "wikilink")》、《[Teenage
Mutant Ninja Turtles IV: Turtles in
Time](https://zh.wikipedia.org/wiki/Teenage_Mutant_Ninja_Turtles_IV:_Turtles_in_Time "wikilink")》、《[恶魔城](https://zh.wikipedia.org/wiki/恶魔城_\(超级任天堂\) "wikilink")》、《[圣剑传说2](https://zh.wikipedia.org/wiki/圣剑传说2 "wikilink")》、《[艾薇莫的秘密](https://zh.wikipedia.org/wiki/艾薇莫的秘密 "wikilink")》、《[最终幻想IV](https://zh.wikipedia.org/wiki/最终幻想IV "wikilink")》、《[最终幻想V](https://zh.wikipedia.org/wiki/最终幻想V "wikilink")》、《[最终幻想VI](https://zh.wikipedia.org/wiki/最终幻想VI "wikilink")》、《[超级马里奥RPG](https://zh.wikipedia.org/wiki/超级马里奥RPG "wikilink")》、《[Dino
City](https://zh.wikipedia.org/wiki/Dino_City "wikilink")》、《[超级马里奥兄弟4](https://zh.wikipedia.org/wiki/超级马里奥兄弟4 "wikilink")》、《[马里奥赛车](https://zh.wikipedia.org/wiki/马里奥赛车 "wikilink")》、《[超级星球大战](https://zh.wikipedia.org/wiki/超级星球大战 "wikilink")》、《[时空之轮](https://zh.wikipedia.org/wiki/时空之轮 "wikilink")》、《[雷莎出击](https://zh.wikipedia.org/wiki/雷莎出击 "wikilink")》、《[Exhaust
Heat](https://zh.wikipedia.org/wiki/Exhaust_Heat "wikilink")》、《[迦楼罗王](https://zh.wikipedia.org/wiki/迦楼罗王 "wikilink")》、《[时空引导者](https://zh.wikipedia.org/wiki/时空引导者 "wikilink")》、《[洛克人7
宿命的对决！](https://zh.wikipedia.org/wiki/洛克人7_宿命的对决！ "wikilink")》、《[超越巅峰](https://zh.wikipedia.org/wiki/超越巅峰 "wikilink")》、《[星之卡比
Super
Deluxe](https://zh.wikipedia.org/wiki/星之卡比_Super_Deluxe "wikilink")》、《[银河风暴](https://zh.wikipedia.org/wiki/银河风暴 "wikilink")》和《[塞尔达传说
众神的三角力量](https://zh.wikipedia.org/wiki/塞尔达传说_众神的三角力量 "wikilink")》。Mode
7方式渲染还用于《[Sonic
CD](https://zh.wikipedia.org/wiki/Sonic_CD "wikilink")》的特定关卡。

## 功能

超级任天堂游戏机有编号从0至7的8个方式来显示背景层，其中最后一个（背景方式7）只有一个可以缩放和旋转的单层。在[Game Boy
Advance和](https://zh.wikipedia.org/wiki/Game_Boy_Advance "wikilink")[任天堂DS](https://zh.wikipedia.org/wiki/任天堂DS "wikilink")
2D图形硬件中，方式1和2可以缩放旋转传统砖块式背景，方式3到5用用来缩放旋转位图（因技术限制，这通常很少在Game Boy
Advance中使用）\[2\]。对于支持此效果的机器，在各扫描线行消隐周期内，可能通过改变缩放/旋转值，绘制一个透视投影平面；这被视作“Mode
7”效果的特征。通过使用其它各行的位置、缩放及旋转方程，可以实现模糊等更复杂的效果。

这种图形方法不仅适用于竞速游戏；它还普遍用于角色扮演游戏的世界地图部分，如[史克威尔](https://zh.wikipedia.org/wiki/史克威尔 "wikilink")1994年畅销游戏《[最终幻想VI](https://zh.wikipedia.org/wiki/最终幻想VI "wikilink")》。效果可让开发者通过制造无垠的远方，来营造庞大世界的效果。

在超级任天堂中，Mode
7的一种变形可让背景层的像素置于子图形上层。比如《[魂斗罗精神](https://zh.wikipedia.org/wiki/魂斗罗精神 "wikilink")》（关卡2），《[賓尼兔的冒險](https://zh.wikipedia.org/wiki/賓尼兔的冒險 "wikilink")》的引入画面，以及玩家掉下舞台时的《马里奥赛车》。Game
Boy Advance游戏使用Mode 2营造相同效果，其通过提供两个“Mode 7”图层，并将子画面置于两个图层之间。

许多PC游戏，其中以《[Wacky
Wheels](https://zh.wikipedia.org/wiki/Wacky_Wheels "wikilink")》和《[Skunny
Kart](https://zh.wikipedia.org/wiki/Skunny_Kart "wikilink")》最为知名，完全通过软件技术模仿了Mode
7。软件自编写程序[Multimedia
Fusion发展了](https://zh.wikipedia.org/wiki/Multimedia_Fusion "wikilink")“Mode
7”，它可让创作者制作使用相似技术的软件。

在超级任天堂时代，Mode
7是任天堂最喜欢的卖点（《[任天堂力量](https://zh.wikipedia.org/wiki/任天堂力量 "wikilink")》、《SNES
Player's Guide》）。比如街机移植到超级任天堂的游戏《[Teenage Mutant Ninja Turtles: Turtles
in
Time](https://zh.wikipedia.org/wiki/Teenage_Mutant_Ninja_Turtles:_Turtles_in_Time "wikilink")》中，一个关卡就从横向卷轴改为Mode
7。

### 公式

使用Mode
7图形的平面纹理地图，是由屏幕坐标到背景坐标的2D[仿射变换而转换成](https://zh.wikipedia.org/wiki/仿射变换 "wikilink")，

  -
    \(\begin{bmatrix} x' \\ y' \end{bmatrix} = \begin{bmatrix} a & b & x_0 \\ c & d & y_0 \end{bmatrix} \begin{bmatrix} x - x_0 \\ y - y_0 \\ 1 \end{bmatrix}\)

a、b、c和d是转换系数；x和y是屏幕偏移；x<sub>0</sub>和y<sub>0</sub>是初始偏移；x'和y'是转换坐标。全部运算都为16位有符号定点数，而全部偏移仅限制在13位。[小数点位于](https://zh.wikipedia.org/wiki/小数点 "wikilink")7和8位之间。

仿射变换仅允许位移、缩放和剪切效果。许多游戏通过逐扫描线基础，进行创造性的变换矩阵参数操作，产生额外的效果。这种方式可实现伪立体、弯曲的表面，以及变形效果。

## 限制

Mode
7只能作用于背景，而无法作用于子图形；因此，任何不随背景旋转/缩放的对象肯定是精灵，即使它通常被视为背景一部分，如固定平台等。比如在《[超级恶魔城IV](https://zh.wikipedia.org/wiki/超级恶魔城IV "wikilink")》和石巨人等头目的战斗中，移动的头目是背景，而主角所站的区块是子图形。在头目战中，相对于FC通过大号子图形显示大型移动头目，而固有的减慢和闪烁，超级任天堂通过在背景层显示头目的移动和动画，可以产生类似的效果，且效果明显提升。但两个系统示例都只适用在水平面移动的对象。例如，地板、天花板或记分板可以作为FC和超级任天堂游戏的背景，只要它们完全位于游戏区域的“上方”或“下方”。如果需要使用整个屏幕，他们也可以变为子图形，但这可能会让画面减慢。

Mode
7不能用来通过改变子图形“大小”来表示它的“逼近”，特定距离的子图形必须预先绘制，这就是说，人们会看到，当用数量有限的各大小子图形来表示“逼近”时，人们会看到子图形在“跳跃”。这可以在《马里奥赛车》和《[HyperZone](https://zh.wikipedia.org/wiki/HyperZone "wikilink")》当物体靠近时看到，或是《[最终幻想VI](https://zh.wikipedia.org/wiki/最终幻想VI "wikilink")》乘坐飞空艇垂直升降的画面。

类似的，子图形的“旋转”也要预处理，除非如《[超级马里奥
耀西岛](https://zh.wikipedia.org/wiki/超级马里奥_耀西岛 "wikilink")》那样由卡带内置的[Super
FX](https://zh.wikipedia.org/wiki/Super_FX "wikilink")
2芯片来硬件处理。厂商有一个著名的解决方案，已经在一些游戏中使用，如：《魂斗罗精神》的第二头目战，以及《[超级马里奥兄弟4](https://zh.wikipedia.org/wiki/超级马里奥兄弟4 "wikilink")》中和Reznor（墙平台支持）、Iggy（战斗平台）、Larry（也是平台）、Morton、Ludwig、Roy和Bowser战斗。在这些例子中，头目是“背景”所以可以使用Mode
7旋转，记分板位于游戏区域上方，所以也算作背景，但是战斗裂开的地板，连同玩家角色与炮火，都是将各种旋转角度重绘“子图形”。然而，这只允许一次处理一个“子图形”。

在《[幻想传说](https://zh.wikipedia.org/wiki/幻想传说 "wikilink")》和《[星之海洋](https://zh.wikipedia.org/wiki/星之海洋 "wikilink")》中，Mode
7般的子图形效果既非预先绘制，也非通过外部芯片重现，飞行时的精灵完全由软件重渲染。在《幻想传说》中，玩家子图形在走到存档点时会上下拉伸，以及《星之海洋》中道具“squash”在打开宝箱时会出现“快要跳出来”的效果。因为这样的渲染需要额外的砖块，以及游戏其他地方对系统的高要求（同时使用流式音频绕开[SPC700的有限能力](https://zh.wikipedia.org/wiki/SPC700 "wikilink")，如同最高端的超级任天堂RPG使用[可变宽度字体](https://zh.wikipedia.org/wiki/可变宽度字体 "wikilink")），这种渲染只限于这几种场景。

[Mega
Drive没有实现Mode](https://zh.wikipedia.org/wiki/Mega_Drive "wikilink")
7的类似原生硬件，但Sega CD扩展补充了这种功能；比如它显著的应用于《[Sonic
CD](https://zh.wikipedia.org/wiki/Sonic_CD "wikilink")》的特定关卡。但是对于《幻想传说》和《星之海洋》的特殊子图形效果，开发商可以通过编程直接为游戏加入类似特技，如《[恶魔城
血族](https://zh.wikipedia.org/wiki/恶魔城_血族 "wikilink")》、《蝙蝠侠与罗宾汉》和《[魂斗罗·铁血兵团](https://zh.wikipedia.org/wiki/魂斗罗·铁血兵团 "wikilink")》等游戏使用了类似效果。[世嘉32X支持](https://zh.wikipedia.org/wiki/世嘉32X "wikilink")2D和基本的3D，所以缩放和旋转效果成为了2D游戏常见要素，如《[Knuckles'
Chaotix](https://zh.wikipedia.org/wiki/Knuckles'_Chaotix "wikilink")》是[索尼克系列首个使用多边形特殊舞台的游戏](https://zh.wikipedia.org/wiki/索尼克系列 "wikilink")。

一些[Amiga游戏通过程序技巧实现了和mode](https://zh.wikipedia.org/wiki/Amiga "wikilink")
7类似的效果，如《[Mr. Nutz: Hoppin'
Mad](https://zh.wikipedia.org/wiki/Mr._Nutz:_Hoppin'_Mad "wikilink")》、《[Lionheart](https://zh.wikipedia.org/wiki/Lionheart_\(游戏\) "wikilink")》、《[Obitus](https://zh.wikipedia.org/wiki/Obitus "wikilink")》和《[Brian
the Lion](https://zh.wikipedia.org/wiki/Brian_the_Lion "wikilink")》。

## 硬件

超级任天堂的两个PPU（图形处理单元）芯片使用了两个8[位](https://zh.wikipedia.org/wiki/位 "wikilink")32[kB的RAM芯片](https://zh.wikipedia.org/wiki/kB "wikilink")。在一个周期中，一个PPU存取砖块地图（128×128砖块），另一个PPU存取砖块集（256砖块，256色8×8像素）。

## 参考文献

[Category:计算机图形学](https://zh.wikipedia.org/wiki/Category:计算机图形学 "wikilink")
[Category:纹理贴图](https://zh.wikipedia.org/wiki/Category:纹理贴图 "wikilink")
[Category:超級任天堂](https://zh.wikipedia.org/wiki/Category:超級任天堂 "wikilink")
[Category:電子遊戲研發](https://zh.wikipedia.org/wiki/Category:電子遊戲研發 "wikilink")

1.
2.  Korth, Martin, [GBATEK: LCD I/O Display
    Control](https://web.archive.org/web/20090621131721/http://nocash.emubase.de/gbatek.htm).
    Retrieved on June 23, 2011.
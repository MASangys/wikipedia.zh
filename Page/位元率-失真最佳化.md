**位元率-失真最佳化**（**Rate–distortion
optimization**，簡稱**RDO**）是一種提升[視訊壓縮效能的](../Page/視訊壓縮.md "wikilink")[最佳化方法](https://zh.wikipedia.org/wiki/最佳化 "wikilink")。其原理是對視訊的失真（畫面品質）與位元率（編碼所需的資料量）同時進行最佳化，以求達到一個最佳的平衡點。雖然此演算法一開始是在[視訊壓縮的](../Page/視訊壓縮.md "wikilink")[編碼器中被使用](../Page/編碼器.md "wikilink")，但也可以用於各種多媒體編碼包含影像、視訊、音訊等等，只要編碼時會同時考慮到品質及檔案大小皆可使用。

## 背景

傳統視訊編碼器在做編碼決策時，是挑選出影像品質最好的畫面。然而只考慮品質的缺點是，會讓決策的結果有時相較於品質稍差的選擇下，花費了更多資料量但只相對提升了一點點品質。一個常見的例子就是[動作補償](https://zh.wikipedia.org/wiki/動作補償 "wikilink")\[1\]，尤其是使用1/4像素精確度的時候。在動作補償過程中，為[宏區塊的動作向量增加額外的精確度可能可提升品質](../Page/宏區塊.md "wikilink")，但有些時候提升的品質，並不值得額外花費用來編碼高精確度動作向量的資料量。

## 運作原理

位元率-失真最佳化藉由作為影像品質的衡量方法，解決了上述的問題。資料量會被用[位元數乘上](../Page/位元.md "wikilink")[拉格朗日乘數來取代](https://zh.wikipedia.org/wiki/拉格朗日乘數 "wikilink")。拉格朗日乘數代表了在某種程度範圍的影像品質下，位元的花費與影像品質之間的關係。以數學式表示：

\[J = D + \lambda \cdot R\] 其中

\[J\]：最終的衡量數據，也被稱為RD cost（rate-distortion cost）

\[D\]：失真的衡量數據

\[\lambda\]：拉格朗日乘數

\[R\]：資料量的衡量數據

為了最大化[峰值信噪比的視訊畫值衡量](../Page/峰值信噪比.md "wikilink")，失真部分通常使用[均方差做計算](https://zh.wikipedia.org/wiki/均方差 "wikilink")。

現行的視訊壓縮[編解碼器中](https://zh.wikipedia.org/wiki/編解碼器 "wikilink")，位元率-失真最佳化需要將每一塊視訊畫面的區塊，經由熵編碼器運算來衡量實際的位元花費，而此計算是複雜的。例如在[MPEG的許多編解碼器標準中](../Page/MPEG.md "wikilink")，完整的計算流程包含了[離散餘弦變換](https://zh.wikipedia.org/wiki/離散餘弦變換 "wikilink")、[量化以及](https://zh.wikipedia.org/wiki/量化 "wikilink")[熵編碼](https://zh.wikipedia.org/wiki/熵編碼 "wikilink")，需全部運算完才能得到實際的位元花費。因此位元率-失真最佳化會較大部分其他*區塊比對*的衡量方法來得慢，譬如（SAD）和（SATD）。因此位元率-失真最佳化通常只在動作補償的最後一個步驟才會被使用，像是在[H.264/AVC中最後需要對各種分割模式下決定的時候](https://zh.wikipedia.org/wiki/H.264/AVC "wikilink")。

## 支援的編碼器

  - [Ateme](https://zh.wikipedia.org/wiki/Ateme "wikilink") H.264編碼器

  - [草谷ViBE編碼器](https://zh.wikipedia.org/wiki/草谷 "wikilink")（SD & HD
    MPEG-2/MPEG-4）

  - Harmonic Electra 8000編碼器（SD & HD MPEG-2/MPEG-4）

  - [libavcodec](../Page/libavcodec.md "wikilink")

  - H.264編碼器

  - [Microsoft](https://zh.wikipedia.org/wiki/Microsoft "wikilink")
    [VC-1編碼器](../Page/VC-1.md "wikilink")

  - SD MPEG-2 EN8100

  - HD MPEG-4 EN8190

  - SD & HD MPEG-4 iPlex

  - [Theora](../Page/Theora.md "wikilink") 1.1-alpha1 and later（the
    "Thusnelda" branch）

  - [x264](../Page/x264.md "wikilink") H.264編碼器

  - [Xvid](../Page/Xvid.md "wikilink") 編碼器

  - [H.264/AVC標準參考軟體JM](https://zh.wikipedia.org/wiki/H.264/AVC "wikilink")（Joint
    Model）

  - [H.265/HEVC標準參考軟體HM](https://zh.wikipedia.org/wiki/H.265/HEVC "wikilink")（HEVC
    Test Model）

## 參見

  - [影像質量](https://zh.wikipedia.org/wiki/影像質量 "wikilink")
  - [壓縮比](https://zh.wikipedia.org/wiki/壓縮比 "wikilink")

## 參考資料

[Category:影像编解码器](https://zh.wikipedia.org/wiki/Category:影像编解码器 "wikilink")
[Category:最优化算法](https://zh.wikipedia.org/wiki/Category:最优化算法 "wikilink")
[Category:最优化](https://zh.wikipedia.org/wiki/Category:最优化 "wikilink")
[Category:图像处理](https://zh.wikipedia.org/wiki/Category:图像处理 "wikilink")
[Category:编解码器](https://zh.wikipedia.org/wiki/Category:编解码器 "wikilink")
[Category:影像壓縮技術](https://zh.wikipedia.org/wiki/Category:影像壓縮技術 "wikilink")

1.  D. T. Hoang, P. M. Long, and [Jeffrey
    Vitter](https://zh.wikipedia.org/wiki/Jeffrey_Vitter "wikilink"),
    [Rate-Distortion Optimizations for Motion Estimation in Low-Bitrate
    Video
    Coding](http://www.ittc.ku.edu/~jsv/Papers/HLV98.optimizationsOfficial.pdf),
    *IEEE Transactions on Circuits and Systems for Video Technology*,
    8(4), August 1998, 488-500. A shorter version appears in
    *Proceedings of the Digital Video Compression Conference*,
    IS\&T/SPIE 1996 Symposium on Electronic Imaging: Science &
    Technology, 2668, San Jose, CA, January–February 1996, 18-27.
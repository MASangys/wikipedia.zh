**全局解释器锁**（，缩写**GIL**），是[计算机程序设计语言](https://zh.wikipedia.org/wiki/计算机程序设计语言 "wikilink")[解释器用于](https://zh.wikipedia.org/wiki/解释器 "wikilink")[同步](https://zh.wikipedia.org/wiki/同步 "wikilink")[线程](../Page/线程.md "wikilink")的一种机制，它使得任何时刻仅有一个线程在执行。\[1\]即便在[多核心处理器上](https://zh.wikipedia.org/wiki/多核心处理器 "wikilink")，使用
GIL 的解释器也只允许同一时间执行一个线程。常见的使用 GIL
的解释器有[CPython](../Page/CPython.md "wikilink")与[Ruby
MRI](../Page/Ruby.md "wikilink")。

## Python的GIL

  - CPython的线程是[操作系统](../Page/操作系统.md "wikilink")的原生线程。在[Linux](../Page/Linux.md "wikilink")上为pthread，在[Windows上为Win](https://zh.wikipedia.org/wiki/Windows "wikilink")
    thread，完全由操作系统调度线程的执行。一个Python解释器进程内有一个主线程，以及多个用户程序的执行线程。即便使用[多核心CPU平台](https://zh.wikipedia.org/wiki/多核心CPU "wikilink")，由于GIL的存在，也将禁止多线程的并行执行。\[2\]
  - Python解释器进程内的多线程是以协作多任务方式执行。当一个线程遇到[I/O任务时](https://zh.wikipedia.org/wiki/I/O "wikilink")，将释放GIL。计算密集型（CPU-bound）的线程在执行大约100次解释器的计步（ticks）时，将释放GIL。计步（ticks）可粗略看作Python虚拟机的指令。计步实际上与时间片长度无关。可以通过sys.setcheckinterval()设置计步长度。
  - 在单核CPU上，数百次的间隔检查才会导致一次线程切换。在多核CPU上，存在严重的线程颠簸（thrashing）。
  - Python
    3.2开始使用新的GIL。新的GIL实现中用一个固定的超时时间来指示当前的线程放弃全局锁。在当前线程保持这个锁，且其他线程请求这个锁时，当前线程就会在5毫秒后被强制释放该锁。
  - 可以创建独立的进程来实现并行化。Python
    2.6引进了多进程包multiprocessing。或者将关键组件用[C](https://zh.wikipedia.org/wiki/C语言 "wikilink")/[C++](../Page/C++.md "wikilink")编写为Python扩展，通过ctypes使Python程序直接调用C语言[编译的](https://zh.wikipedia.org/wiki/编译 "wikilink")[动态链接库](../Page/动态链接库.md "wikilink")的导出函数。

## 参考文献

[Category:计算机编程](https://zh.wikipedia.org/wiki/Category:计算机编程 "wikilink")

1.
2.
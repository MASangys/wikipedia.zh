[缩略图](https://zh.wikipedia.org/wiki/File:VirtualBox2.png "fig:缩略图") 在[计算机科学](../Page/计算机科学.md "wikilink")中，**全虚拟化（）**是[硬件虚拟化](../Page/硬件虚拟化.md "wikilink")的一种，允许**未经修改**的客操作系统（）隔离运行。硬件虚拟化对客操作系统隐藏了真实的硬件，虚拟机运行在一个架设在硬件或主机操作系统（）之上的[虚拟机监视器(VMM)中](../Page/Hypervisor.md "wikilink")。对于全虚拟化，硬件特征会被映射到虚拟机上，这些特征包括完整的指令集、[I/O操作](https://zh.wikipedia.org/wiki/I/O "wikilink")、中断和内存管理等。在全虚拟化环境中，任何可以运行在[裸机上的软件](https://zh.wikipedia.org/wiki/裸设备 "wikilink")（通常是操作系统）都可以未经修改地运行在虚拟机中。相对地，[半虚拟化](https://zh.wikipedia.org/wiki/半虚拟化 "wikilink")（）则要求对客操作系统做出必要的更改，以适应VMM提供的半虚拟化[API](https://zh.wikipedia.org/wiki/API "wikilink")。\[1\]

实现一个比主机操作系统优先级更高的[VMM或超级操作系统](../Page/Hypervisor.md "wikilink")（）是全虚拟化与[1型虚拟化](https://zh.wikipedia.org/wiki/1型虚拟化 "wikilink")（）的基础。监视器或超级操作系统需要两个关键特性来提供并保护虚拟化环境：

1.  **操作系统无关的储存管理**，可以为不同的虚拟环境（如Linux、Windows和嵌入式环境）提供资源，并保护这些环境不会被未经授权地访问；
2.  **虚拟化环境的切换**，以向虚拟机分配物理计算资源。Intel VT-x与AMD-V的[x86虚拟化和IBM在](https://zh.wikipedia.org/wiki/x86虚拟化 "wikilink")20世纪60年代末到70年代初的早期虚拟机有着不同的实现。

全虚拟化仅仅在[波佩克与戈德堡虚拟化需求](../Page/波佩克与戈德堡虚拟化需求.md "wikilink")得以满足时才是可行的。

在大多数[IBM System/360](https://zh.wikipedia.org/wiki/IBM_System/360 "wikilink")（IBM System/360-67是一个例外）和早期的[IBM System/370是无法实现全虚拟化的](https://zh.wikipedia.org/wiki/IBM_System/370 "wikilink")。IBM于1972年在System/370上添加了实现虚拟化内存的硬件，从而实现了全虚拟化。

全虚拟化在早期的x86平台上也无法实现。直到2006年前后，AMD和Intel分别加入了AMD-V和Intel VT-x扩展（参见[x86虚拟化](https://zh.wikipedia.org/wiki/x86虚拟化 "wikilink")）。Intel VT-x采用了[保护环的实现方式](../Page/分级保护域.md "wikilink")，以恰当地控制虚拟机的内核模式特权。然而在此之前许多x86上的平台VMM已经非常接近于实现全虚拟化，甚至宣称支持全虚拟化。比如 Adeos、Mac-on-Linux、Parallels Desktop for Mac、Parallels Workstation、[VMware Workstation](../Page/VMware_Workstation.md "wikilink")、VMware Server、[VirtualBox](../Page/VirtualBox.md "wikilink")、Win4BSD和Win4Lin Pro。以VMware为例，它使用[二进制翻译的技术](https://zh.wikipedia.org/wiki/二进制翻译 "wikilink")，可以在运行时将x86软件中的一些可以“穿过虚拟机”的指令自动地翻译成对主机安全的指令。\[2\]

全虚拟化技术应对的关键挑战是对有高特权操作的侦听和模拟，比如I/O操作。虚拟机中所有操作的副作用一定要限制在虚拟机之内——虚拟操作不可以修改其他虚拟机的状态、控制程序或是硬件。对于涉及对象完全受VMM管理的机器指令，可以直接在硬件上执行，例如内存地址和算数寄存器。其他一些指令可能会“穿过虚拟机”，即可以访问或影响状态信息或对虚拟机外产生影响，这些指令就不可以直接执行，它们必须被软中断之后由VMM模拟执行。

全虚拟化已被证实的成功之处有：

  - 多用户之间共享系统
  - 隔离用户（和控制程序）
  - 模拟新硬件，提升可靠性、安全性和生产力

## 参见

  -
  -
  -
  -
  - [管理程序](../Page/Hypervisor.md "wikilink")

  -
  -
  - [作業系統層虛擬化](../Page/作業系統層虛擬化.md "wikilink")

  -
  - [硬件虚拟化](../Page/硬件虚拟化.md "wikilink")

  - [波佩克和戈德堡虚拟化的要求](../Page/波佩克与戈德堡虚拟化需求.md "wikilink")

  -
  - [虛擬機器](../Page/虛擬機器.md "wikilink")

## 参考文献

## 外部链接

  - [Compatibility is Not Transparency: VMM Detection Myths and Realities](http://static.usenix.org/legacy/events/hotos07/tech/full_papers/garfinkel/garfinkel_html/)

[Category:硬件虚拟化](https://zh.wikipedia.org/wiki/Category:硬件虚拟化 "wikilink")

1.
2.
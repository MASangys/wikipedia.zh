**動態裝載**（）是一種程序運行機制，能讓[計算機](https://zh.wikipedia.org/wiki/計算機 "wikilink")[程序在運行時](https://zh.wikipedia.org/wiki/程序 "wikilink")（而不是編譯時）裝載[庫](https://zh.wikipedia.org/wiki/庫 "wikilink")（或者其他[二進制對象](https://zh.wikipedia.org/wiki/二進制 "wikilink")）到[內存中](https://zh.wikipedia.org/wiki/內存 "wikilink")，然後檢索庫中[函數和](https://zh.wikipedia.org/wiki/函數 "wikilink")[變量的地址](https://zh.wikipedia.org/wiki/變量 "wikilink")，并執行這些函數或訪問這些變量，且能在不需要時將庫從內存中卸載。動態裝載、[靜態鏈接與](https://zh.wikipedia.org/wiki/靜態鏈接 "wikilink")[動態鏈接](https://zh.wikipedia.org/wiki/動態鏈接 "wikilink")（注意區分動態裝載與動態鏈接的微妙差別）是複用其他軟件代碼的三種機制，不同於靜態鏈接和動態鏈接，這種機制允許計算機程序在沒有某些庫的情況下啟動，然後在運行的過程中發現可用的庫從而獲得額外的功能。

## 歷史沿革

動態裝載早在1960年代的[IBM/360](https://zh.wikipedia.org/wiki/IBM/360 "wikilink")[操作系統中就已經廣泛使用](https://zh.wikipedia.org/wiki/操作系統 "wikilink")，尤其是在[輸入/輸出子模塊](https://zh.wikipedia.org/wiki/輸入/輸出 "wikilink")，以及[COBOL](../Page/COBOL.md "wikilink")和[PL/I的](https://zh.wikipedia.org/wiki/PL/I "wikilink")[運行時庫中](https://zh.wikipedia.org/wiki/運行時庫 "wikilink")。裝載的過程對於應用程序開發者是透明的，主要由操作系統或者輸入輸出子系統自動處理。這樣做的好處有：

  - 修復子系統漏洞時只需要打一次[補丁即可](https://zh.wikipedia.org/wiki/補丁 "wikilink")，而不需要重新鏈接
  - 程序庫可以免於被胡亂修改而造成嚴重影響

IBM于1970年代開發的戰略性[事務處理操作系統](https://zh.wikipedia.org/wiki/事務處理 "wikilink")[CICS中](https://zh.wikipedia.org/wiki/CICS "wikilink")，不僅在普通[應用程序級別上使用了動態加載](https://zh.wikipedia.org/wiki/應用程序 "wikilink")，甚至在[內核級別都廣泛採取這種機制](https://zh.wikipedia.org/wiki/內核 "wikilink")，這使得用戶可以在不用重啟CICS操作系統的前提下，就可以對應用程序做任何級別的漏洞修復。

## 用法

並非所有[作業系統都支持動態裝載](https://zh.wikipedia.org/wiki/作業系統 "wikilink")。[類UNIX作業系統通過](https://zh.wikipedia.org/wiki/類UNIX "wikilink")[C編程語言實作而成的](https://zh.wikipedia.org/wiki/C編程語言 "wikilink")**dl**庫提供該類功能。在[微軟的](https://zh.wikipedia.org/wiki/微軟 "wikilink")[視窗](../Page/視窗.md "wikilink")[作業系統採用](https://zh.wikipedia.org/wiki/作業系統 "wikilink")[Windows應用程序接口](https://zh.wikipedia.org/wiki/Windows "wikilink")。

<table>
<thead>
<tr class="header">
<th></th>
<th><p>類UNIX系統[1][2]</p></th>
<th><p>視窗系統</p></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><p>申明</p></td>
<td><p>dlfcn.h</p></td>
<td><p>windows.h</p></td>
</tr>
<tr class="even">
<td><p>定義</p></td>
<td><p>libdl</p></td>
<td><p>kernel32.dll</p></td>
</tr>
<tr class="odd">
<td><p>裝載庫</p></td>
<td><p>dlopen</p></td>
<td><p>LoadLibrary<br />
LoadLibraryEx<br />
</p></td>
</tr>
<tr class="even">
<td><p>解析庫</p></td>
<td><p>dlsym</p></td>
<td><p>GetProcAddress</p></td>
</tr>
<tr class="odd">
<td><p>卸載庫</p></td>
<td><p>dlclose</p></td>
<td><p>FreeLibrary</p></td>
</tr>
</tbody>
</table>

## 參考資料

[Category:作業系統技術](https://zh.wikipedia.org/wiki/Category:作業系統技術 "wikilink")
[Category:计算机编程](https://zh.wikipedia.org/wiki/Category:计算机编程 "wikilink")

1.
2.
**-{zh-tw:即時作業系統; zh-cn:实时操作系统}-**（, RTOS），又稱**-{zh-tw:實時作業系統;
zh-cn:即时操作系统}-**，它會按照排序執行、管理系統資源，並為開發應用程式提供一致的基礎。

实时操作系统与一般的[操作系统相比](../Page/操作系统.md "wikilink")，最大的特色就是其「[实时性](../Page/實時計算.md "wikilink")」\[1\]，也就是说，如果有一个任务需要执行，实时操作系统会马上（在较短时间内）执行该任务，不会有较长的延时。这种特性保证了各个任务的及时执行。

设计实时操作系统的首要目标不是高的[吞吐量](../Page/吞吐量.md "wikilink")，而是保证任务在特定时间内完成，因此衡量一个实时操作系统坚固性的重要指标，是系统从接收一个任务，到完成该任务所需的时间，其时间的变化称为[抖动](../Page/实时计算.md "wikilink")。可以依抖动將实时操作系统分為兩種：硬实时操作系统及软实时操作系统，硬实时操作系统比软实时操作系统有更少的抖动：

  - 硬实时操作系统**必须**使任务在确定的时间内完成。
  - 软实时操作系统能让**绝大多数**任务在确定时间内完成。\[2\]

实时操作系统与一般的操作系统有着不同的[调度算法](../Page/排程.md "wikilink")。普通的操作系统的调度器对于线程优先级等方面的处理更加灵活；而实时操作系统追求最小的和[线程切换延时](../Page/上下文交換.md "wikilink")。\[3\]

通常都會有最基礎的[內核](../Page/內核.md "wikilink")，以及外加上去的模組，像是[檔案系統](../Page/檔案系統.md "wikilink")、[網路協定堆疊和應用](../Page/網路協定堆疊.md "wikilink")、裝置驅動程式等模組。

RTOS的內核通常會有：[排程器](../Page/排程器.md "wikilink")、[物件](../Page/物件.md "wikilink")、[服务](../Page/服务.md "wikilink")

## 设计理念

通常，实时操作系统分为两大类:

  - 事件驱动型。当一个高优先级的任务需要执行时，系统会自动[切换到这个任务](../Page/上下文交换.md "wikilink")。这种根据优先级调度任务的方式称为[抢占式任务处理](../Page/抢占式任务处理.md "wikilink")。
  - 时间触发-{}-型。每个任务在各自设定好的的时间间隔内重复、轮流调度。

时间触发-{}-型设计往往比较严格地调度任务，具有更好的[多任务处理能力](../Page/多任务处理.md "wikilink")。多个任务被不停地轮流调度，在宏观上，就相当于一个[CPU同时执行多个任务](../Page/CPU.md "wikilink")。

在过去，CPU在切换任务时往往需要多个[机器周期](../Page/机器周期.md "wikilink")，在这段时间内，CPU不能处理其他任何任务。例如，一个20
MHz的[摩托罗拉68000处理器](../Page/摩托罗拉68000.md "wikilink")（1980年代后期），在切换任务时需要花费20微秒。（相比之下，一个100
MHz的[ARM架构的处理器](../Page/ARM架构.md "wikilink")（2008年之后的）只需要3微秒。）\[4\]\[5\]因此，早期的实时操作系统通过减少任务切换次数来避免消耗过多CPU时间。

## 任务调度

在典型的设计中，一个任务有以下三种状态：

1.  正在运行（Running，正在CPU中执行）
2.  待命（Ready，等待执行）
3.  阻塞（Blocked，任务暂停，等待一个事件的发生，例如接收一组数据）

由于CPU在某个时间只能执行一个任务，大部分任务，在大部分时间，处于阻塞或待命状态。可能会有大量项目在待命列表里等待执行，这取决于系统所需的任务数量以及调度器的类型。

通常情况下，对于简单的时间触发-{}-式调度器来说，待命任务列表的数据结构的设计要尽可能缩短最坏情况下，程序在调度器关键部分的执行时间，以防止其他任务一直在待命列表中，无法及时执行。因此，在这种调度器中，应尽可能避免抢占式任务，甚至应该关闭调度器之外的所有中断。当然，待命任务列表的数据结构也应根据这个系统需要的最大任务数量做进一步的优化。

如果待命任务列表中的任务较多，[双向链表是一个比较好的选择](../Page/双向链表.md "wikilink")。如果待命任务列表通常包含少量任务，但偶尔会出现较多任务，任务应该根据优先级排序。这样一来，要寻找最高优先级的任务，就不必要在整个列表中一个一个地寻找。而插入任务需要从列表中的第一个任务开始，向后寻找，直到找到比要插入的任务优先级低的任务，然后插入到该任务之前；如果没有找到优先级更低的任务，就插入到任务列表末尾。

在寻找任务列表，准备插入任务的过程中，应该注意避免抢占。长的关键部分应分为多个小的部分分别执行。如果在寻找任务列表，要插入低优先级任务的时候，一个中断-{}-发生使高优先级任务进入待命状态，高优先级任务应该在低优先级任务被插入之前立马被插入列表和执行。

在更先进的系统中，实时任务和许多非实时任务共享运算资源，这时候待命任务列表会变得很长。在这种系统中，待命任务列表可能不适合用链表的结构。

### 排程算法

一些实时操作系统中常用的算法：

  - 合作式调度

<!-- end list -->

  - [抢占式调度](../Page/抢占式多任务处理.md "wikilink")
      - [Rate-monotonic
        scheduling](../Page/Rate-monotonic_scheduling.md "wikilink")
      - [Round-robin
        scheduling](../Page/Round-robin_scheduling.md "wikilink")
      - [Fixed priority pre-emptive
        scheduling](../Page/Fixed_priority_pre-emptive_scheduling.md "wikilink"),
        an implementation of [preemptive time
        slicing](../Page/Preemption_\(computing\)#Time_slice.md "wikilink")
      - Fixed-Priority Scheduling with Deferred Preemption
      - Fixed-Priority Non-preemptive Scheduling
      - Critical section preemptive scheduling
      - Static time scheduling
  - [Earliest Deadline
    First](../Page/Earliest_deadline_first_scheduling.md "wikilink")
    approach
  - [Stochastic](../Page/Stochastic.md "wikilink")
    [digraphs](../Page/Directed_graph.md "wikilink") with
    [multi-threaded](../Page/Thread_\(computer_science\).md "wikilink")
    [graph traversal](../Page/Tree_traversal.md "wikilink")

## RTOS举例

WinCE、VxWorks、μC/OS-Ⅱ等运用较广。Linux是作为通用操作系统开发的，其内核在实时处理能力上先天不足，部分网络开发社区将其经过改造能在一定程度上成为实时操作系统。\[6\]

### 開放原始碼&免费

  - [Raw-OS](../Page/Raw-OS.md "wikilink") [1](http://www.raw-os.org/)
  - [CoOS](../Page/CoOS.md "wikilink")
    [2](https://web.archive.org/web/20160426223735/http://www1.coocox.org/CoOS.htm)

### 開放原始碼

  - [RT-Thread](../Page/RT-Thread.md "wikilink")
    [3](http://www.rt-thread.org/)
  - [eCos](../Page/eCos.md "wikilink")
  - [Fiasco.OC](../Page/Fiasco.OC.md "wikilink")
    [4](http://os.inf.tu-dresden.de/fiasco/)
  - [FreeRTOS](../Page/FreeRTOS.md "wikilink")
    [5](https://www.freertos.org/)
  - [Phoenix-RTOS](../Page/Phoenix-RTOS.md "wikilink")
  - [Nut/OS](../Page/Nut/OS.md "wikilink") [6](http://www.ethernut.de)
  - [Prex](../Page/Prex.md "wikilink")
  - [RTAI](../Page/RTAI.md "wikilink")
  - [RTEMS](../Page/RTEMS.md "wikilink")
  - [RTLinux](../Page/RTLinux.md "wikilink")
  - [SHaRK](../Page/SHaRK.md "wikilink") [7](http://shark.sssup.it/)
  - [TRON Project](../Page/TRON.md "wikilink")
  - [Xenomai](../Page/Xenomai.md "wikilink")
    [8](https://web.archive.org/web/20070926231656/https://gna.org/projects/xenomai/)
  - [CoOS](../Page/CoOS.md "wikilink")
    [9](https://web.archive.org/web/20131101071323/http://www.coocox.org/CoOS.htm)
  - [One OS](../Page/One_OS.md "wikilink")
    [10](http://github.com/EDI-Systems/M5P1_MuProkaron)

### 非開放原始碼

  - [Ardence RTX](../Page/Ardence.md "wikilink")
  - [BeOS](../Page/BeOS.md "wikilink")
  - [ChorusOS](../Page/ChorusOS.md "wikilink")
  - [DNIX](../Page/DNIX.md "wikilink")
  - [DMERT](../Page/DMERT.md "wikilink")
  - [e-Tkernel](../Page/e-Tkernel.md "wikilink")
  - [HOPEN OS](../Page/HOPEN_OS.md "wikilink")
  - [embOS
    (Segger)](../Page/Segger_Microcontroller_Systems.md "wikilink")
  - [INTEGRITY](../Page/INTEGRITY_\(操作系统\).md "wikilink")
  - [ITRON](../Page/ITRON.md "wikilink")
  - [LynxOS](../Page/LynxOS.md "wikilink")
  - [MERT](../Page/MERT.md "wikilink")
  - [MicroC/OS-II](../Page/MicroC/OS-II.md "wikilink")
  - [MQX RTOS](../Page/MQX_RTOS.md "wikilink")
    [11](http://www.MQXembedded.com)
  - [Nucleus](../Page/Nucleus_RTOS.md "wikilink")
  - [OS-9](../Page/OS-9.md "wikilink")
  - [OSE](../Page/Operating_System_Embedded.md "wikilink")
  - [OSEK/VDX](../Page/OSEK/VDX.md "wikilink")
  - [OSEKtime](../Page/OSEKtime.md "wikilink")
  - [PDOS](../Page/PDOS.md "wikilink")
  - [Phar Lap ETS](../Page/Ardence.md "wikilink")
  - [PikeOS](../Page/PikeOS.md "wikilink")
  - [Portos](../Page/Portos.md "wikilink")
  - [pSOS](../Page/pSOS.md "wikilink")
  - [QNX](../Page/QNX.md "wikilink")
  - [RMX](../Page/RMX.md "wikilink")
  - [RSX-11](../Page/RSX-11.md "wikilink")
  - [RT-11](../Page/RT-11.md "wikilink")
  - [RTOS-UH](../Page/RTOS-UH.md "wikilink")
  - [RTXC](../Page/RTXC.md "wikilink")
  - [Salvo RTOS](../Page/Salvo_RTOS.md "wikilink")
    [12](http://www.pumpkininc.com)
  - [SINTRAN III](../Page/SINTRAN_III.md "wikilink")
  - [Symbian OS](../Page/Symbian_OS.md "wikilink")
  - [ThreadX](../Page/Threadx.md "wikilink")
  - [VRTX](../Page/VRTX.md "wikilink")
  - [VxWorks](../Page/VxWorks.md "wikilink")
  - [Windows CE](../Page/Windows_CE.md "wikilink")
  - [µnOS](../Page/µnOS.md "wikilink")
  - [UNIX-RTR](../Page/UNIX-RTR.md "wikilink")
  - [REX](../Page/REX.md "wikilink")
  - [HP-1000/RTE](../Page/HP-1000/RTE.md "wikilink")
    [13](https://web.archive.org/web/20060823221815/http://www.hp.com/products1/rte/tech_support/documentation/index.html)

## 参考文献

{{-}}

[Category:嵌入式操作系统](https://zh.wikipedia.org/wiki/Category:嵌入式操作系统 "wikilink")
[Category:操作系统技术](https://zh.wikipedia.org/wiki/Category:操作系统技术 "wikilink")
[Category:实时操作系统](https://zh.wikipedia.org/wiki/Category:实时操作系统 "wikilink")

1.
2.
3.
4.
5.
6.
> 本文内容由[盐 \(密码学\)](https://zh.wikipedia.org/wiki/盐_\(密码学\))转换而来。


**盐**（Salt），在[密码学](../Page/密码学.md "wikilink")中，是指在[散列](../Page/散列.md "wikilink")之前将散列内容（例如：密码）的任意固定位置插入特定的字符串。这个在散列中加入字符串的方式称为「加盐」。其作用是让加盐後的散列结果和没有加盐的结果不相同，在不同的应用情景中，这个处理可以增加额外的安全性。

在大部份情况，盐是不需要保密的。盐可以是[随机产生的字符串](https://zh.wikipedia.org/wiki/随机 "wikilink")，其插入的位置可以也是随意而定。如果这个散列结果在将来需要进行验证（例如：验证用户输入的密码），则需要将已使用的盐记录下来。

## 安全因素

通常情况下，当字段经过散列处理（如[MD5](../Page/MD5.md "wikilink")），会生成一段散列值，而散列后的值一般是无法通过特定算法得到原始字段的。但是某些情况，比如一个大型的[彩虹表](https://zh.wikipedia.org/wiki/彩虹表 "wikilink")，通过在表中搜索该MD5值，很有可能在极短的时间内找到该散列值对应的真实字段内容。

加盐后的散列值，可以极大的降低由于用户数据被盗而带来的密码泄漏风险，即使通过彩虹表寻找到了散列后的数值所对应的原始内容，但是由于经过了加盐，插入的字符串扰乱了真正的密码，使得获得真实密码的概率大大降低。

## 实现原理

加盐的实现过程通常是在需要散列的字段的特定位置增加特定的字符，打乱原始的字串，使其生成的散列结果产生变化。比如，用户使用了一个密码：

`x7faqgjw`

经过SHA散列后，可以得出结果：

`58ecbf2b3136ceda7fddfd986ba8bd8d59b2d73779691e839f3f176ce2c04b84`

但是由于用户密码位数不足，短密码的散列结果很容易被[彩虹表破解](https://zh.wikipedia.org/wiki/彩虹表 "wikilink")，因此，在用户的密码末尾添加特定字串（绿色字体为加盐的字段）：

`x7faqgjw`<span style="color:#090">`abcdefghijklmnopqrstuvwxyz`</span>

因此，加盐后的密码位数更长了，散列的结果也发生了变化：

`7b5001a5a8bcdcfa1b64d41f6339cfa7a5c0eca04cca6ff6a6c1d6aad17794cc`

以上就是加盐过程的简单描述，在实际使用过程中，还需要通过特定位数插入、倒序或多种方法对原始密码进行固定的加盐处理，使得散列的结果更加不容易被破解或轻易得到原始密码，比如（绿色字体为加盐字串）：

`x7`<span style="color:#090">`a`</span>`fa`<span style="color:#090">`b`</span>`qg`<span style="color:#090">`c`</span>`jw`

## 代码样本

### PHP

``` php
//这是一个简单的、在输入内容之後加入“WIKIPEDIA“并进行散列的PHP代码。
<?php
function hash($a) {
    $salt="WIKIPEDIA"; //定义一个加盐字段(WIKIPEDIA)，一旦设定并使用，将不可更动。
    $b=$a.$salt; //把密码和加盐字段连接。
    $b=sha($b); //执行MD5散列。
    return $b; //返回散列。
}
?>
```

## 参考文献

  -
[Category:密码学](https://zh.wikipedia.org/wiki/Category:密码学 "wikilink")
**约定优于配置**（**convention over
configuration**）\[1\]，也称作**按约定编程**\[2\]，是一种软件[设计范式](https://zh.wikipedia.org/wiki/设计范式 "wikilink")，旨在减少[软件开发人员需做决定的数量](https://zh.wikipedia.org/wiki/软件设计师 "wikilink")，获得简单的好处，而又不失灵活性。

本质是说，开发人员仅需规定应用中不符约定的部分。例如，如果模型中有个名为Sale的类，那么数据库中对应的表就会默认命名为sales。只有在偏离这一约定时，例如将该表命名为"products_sold"，才需写有关这个名字的配置。

如果您所用工具的约定与你的期待相符，便可省去配置；反之，你可以配置来达到你所期待的方式。

## 动机

设计不好的框架通常需要多个配置文件，每一个都有许多设置。这些配置文件为每一个项目提供信息说明从URL到将类映射到数据库表的各种信息。大量包含太多参数的配置文件通常是过度复杂的应用设计的指标（代码坏味道）\[3\]

例如，在知名的Java[对象关系映射框架](../Page/对象关系映射.md "wikilink")[Hibernate的早期版本中](../Page/Hibernate.md "wikilink")，将类及其属性映射到数据库上需要是在XML文件中的描述，其中大部分信息都应能够按照约定得到，如将类映射到同名的[数据库表](../Page/数据库.md "wikilink")，将属性分别映射到表上的字段。后续的版本抛弃了[XML配置文件](../Page/XML.md "wikilink")，而是使用这些恰当的约定，对于不符合这些约定的情形，可以使用[Java
标注来说明](https://zh.wikipedia.org/wiki/Java_标注 "wikilink")（参见下面提供的JavaBeans规范）。

## 使用

[Maven_CoC.svg](https://zh.wikipedia.org/wiki/File:Maven_CoC.svg "fig:Maven_CoC.svg")

许多新的框架使用了约定优于配置的方法，包括：[Spring](../Page/Spring_Framework.md "wikilink")\[4\]，[Ruby
on Rails](../Page/Ruby_on_Rails.md "wikilink")\[5\]，Kohana
PHP，[Grails](https://zh.wikipedia.org/wiki/Grails_\(Framework\) "wikilink")\[6\]，[Grok](https://zh.wikipedia.org/wiki/Grok_\(web_framework\) "wikilink")，[Zend
Framework](https://zh.wikipedia.org/wiki/Zend_Framework "wikilink")，[CakePHP](https://zh.wikipedia.org/wiki/CakePHP "wikilink")，[symfony](https://zh.wikipedia.org/wiki/symfony "wikilink")，[Maven](../Page/Apache_Maven.md "wikilink")，[ASP.NET
MVC](https://zh.wikipedia.org/wiki/ASP.NET_MVC "wikilink")，[Web2py](https://zh.wikipedia.org/wiki/Web2py "wikilink")（MVC），[Apache
Wicket](https://zh.wikipedia.org/wiki/Apache_Wicket "wikilink")。

这是一个古老的概念,
甚至在[Java类库中也可以找出这一概念的踪迹](../Page/Java.md "wikilink")。例如，[JavaBean规范非常多的依赖这一概念](https://zh.wikipedia.org/wiki/JavaBean "wikilink")。下面摘录[JavaBeans](https://zh.wikipedia.org/wiki/JavaBean "wikilink")
1.1版规范的一段:\[7\]

> 按照一般的规则，我们不希望造出一个奇怪的java.beans.everything类，其他类需要从该类派生。而是希望在运行时[JavaBeans为一般的对象提供缺省的行为特征](https://zh.wikipedia.org/wiki/JavaBean "wikilink")，但是允许对象通过继承特定的java.beans.something接口来覆盖缺省的行为特征的一部分。\[8\]

## 参考文献

## 外部链接

  - [Detailed information on
    CoC](http://softwareengineering.vazexqi.com/files/pattern.html)
  - [Convention Over
    Configuration](http://msdn.microsoft.com/en-us/magazine/dd419655.aspx)

## 参见

  - [Ruby on Rails](../Page/Ruby_on_Rails.md "wikilink")
  - [KISS原则](../Page/KISS原则.md "wikilink")
  - [一次且仅一次](../Page/一次且仅一次.md "wikilink")

[Category:面向对象的程序设计](https://zh.wikipedia.org/wiki/Category:面向对象的程序设计 "wikilink")
[Category:软体设计](https://zh.wikipedia.org/wiki/Category:软体设计 "wikilink")

1.  也译作惯例优于配置，惯例优先原则
2.  Coding by convention
3.  C2 Wiki (2009-09-01). Too Many Parameters. C2 Wiki, 1 September
    2009. Retrieved from <http://c2.com/cgi/wiki$?TooManyParameters>.
4.  Chapter 13.11 describes the application in the context of spring
    model/view/controller
    <http://static.springsource.org/spring/docs/2.0.x/reference/mvc.html>
5.  <http://rubyonrails.org/>, advertises the paradigm right from 'home'
6.  a description of configuration with the goal of convention
    <http://grails.org/Unified+Configuration>, and relationship to bean
    referencing from spring
7.  Sun (no date). JavaBeans specification, section 1.4. Retrieved from
    <http://java.sun.com/javase/technologies/desktop/javabeans/docs/spec.html>.
8.  "As a general rule we don't want to invent an enormous
    java.beans.everything class that people have to inherit from.
    Instead we'd like the
    [JavaBeans](https://zh.wikipedia.org/wiki/JavaBean "wikilink")
    runtimes to provide default behaviour for 'normal' objects, but to
    allow objects to override a given piece of default behaviour by
    inheriting from some specific java.beans.something interface."
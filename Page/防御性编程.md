**防御性编程**（Defensive programming）是[防御式设计](../Page/防御式设计.md "wikilink")的一种具体体现，它是为了保证，对程序的不可预见的使用，不会造成程序功能上的损坏。它可以被看作是为了减少或消除[墨菲定律效力的想法](https://zh.wikipedia.org/wiki/墨菲定律 "wikilink")。防御式编程主要用于可能被滥用，恶作剧或无意地造成灾难性影响的程序上。\[1\]

## 安全编程

防御性编程有时也被[计算机科学家称为](https://zh.wikipedia.org/wiki/计算机科学家 "wikilink")**安全编程**（Secure programming）。潜在的软件缺陷可能会被黑客利用，而进行[代码注入](https://zh.wikipedia.org/wiki/代码注入 "wikilink")，[拒绝服务攻击或其他攻击](https://zh.wikipedia.org/wiki/拒绝服务攻击 "wikilink")。

防御性编程与非防御性编程之间的区别在于，程序员不会对特定的函数调用或库的使用情况做假设。下面是一个例子：

``` c
int risky_programming(char *input){
  char str[1000+1];     // one more for the null character
  // ...
  strcpy(str, input);   // copy input
  // ...
}
```

当输入超过1000个字符时，该函数将会崩溃。一些新手程序员可能并不会觉得这是个问题，因为没有用户会输入这么长的字符串。实行防御性编程的程序员不会允许这样的错误，因为这段程序包含一个已知的bug，一个可能会导致[缓冲区溢出](../Page/缓冲区溢出.md "wikilink")攻击的漏洞。下面这个例子是一个解决方案：

``` c
int secure_programming(char *input){
  char str[1000];
  // ...
  strncpy(str, input, sizeof(str)); // copy input without exceeding the length of the destination
  str[sizeof(str) - 1] = '\0'; // if strlen(input) == sizeof(str) then strncpy won't NUL terminate
  // ...
}
```

## 参见

  - [计算机安全](../Page/计算机安全.md "wikilink")

  - [鲁棒性 (计算机科学)](https://zh.wikipedia.org/wiki/鲁棒性_\(计算机科学\) "wikilink")

  -
## 参考文献

[Category:编程原则](https://zh.wikipedia.org/wiki/Category:编程原则 "wikilink") [Category:編程典範](https://zh.wikipedia.org/wiki/Category:編程典範 "wikilink")

1.
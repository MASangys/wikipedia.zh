[HittingTimes1.png](https://zh.wikipedia.org/wiki/File:HittingTimes1.png "fig:HittingTimes1.png")（[维纳过程](../Page/维纳过程.md "wikilink")）是鞅的一个例子\]\]
在[概率论中](https://zh.wikipedia.org/wiki/概率论 "wikilink")，**鞅**（）是满足下述条件的[随机过程](../Page/随机过程.md "wikilink")：已知过去某一
时刻 s 以及之前所有时刻的观测值，若某一时刻 t
的观测值的[条件期望等於过去某一时刻](../Page/条件期望.md "wikilink")
s 的观测值，则称这一随机过程是鞅。而於博弈论中，鞅的經常用來作為公平博弈的数学模型。

## 历史

[Wiener_process_3d.png](https://zh.wikipedia.org/wiki/File:Wiener_process_3d.png "fig:Wiener_process_3d.png")（[维纳过程](../Page/维纳过程.md "wikilink")）\]\]
鞅的原名 martingale
原指一类於18世纪流行於[法国的](https://zh.wikipedia.org/wiki/法国 "wikilink")[投注策略](https://zh.wikipedia.org/wiki/投注策略 "wikilink")，称为[加倍赌注法](https://zh.wikipedia.org/wiki/加倍赌注法 "wikilink")\[1\]。这类策略中最简单的一种策略是为博弈设计的。在博弈中，赌徒会掷硬币，若硬币正面向上，赌徒会赢得赌本，若硬币反面向上，赌徒会输掉赌本。这一策略使赌徒在输钱後加倍赌金投注，为的是在初次赢钱时赢回之前输掉的所有钱，同时又能另外赢得与最初赌本等值的收益。当赌徒的财产和可用时间同时接近无穷时，他掷硬币後硬币正面向上的概率会接近1，由此看来，加倍赌注法似乎是一种[必然能赢钱的策略](https://zh.wikipedia.org/wiki/几乎肯定 "wikilink")。然而，赌金的[指数增长最终会导致使用这一策略的赌徒破产](https://zh.wikipedia.org/wiki/指数增长 "wikilink")。

鞅的概念首先是由[保羅·皮埃爾·萊維於](https://zh.wikipedia.org/wiki/保羅·皮埃爾·萊維 "wikilink")
1934 年提出的，但他只提出了離散時間的版本，而且沒有給予命名。直到 1939 年，將此概念推廣到連續時間的情況，並且首次提出
martingale 这個名稱。（Joseph Leo
Doob）等人在鞅的相關理論的初期發展做出重大貢獻，而完成这些工作的部分动机是为了表明成功的投注策略不可能存在。此外，[伊藤清在分析应用方面作出了重要的贡献](../Page/伊藤清.md "wikilink")。从
1970
年代开始，鞅论就在[纯粹数学和](https://zh.wikipedia.org/wiki/纯粹数学 "wikilink")[应用数学的很多领域中有广泛的应用](https://zh.wikipedia.org/wiki/应用数学 "wikilink")，特别是在[数学物理和](../Page/数学物理.md "wikilink")[金融数学中](https://zh.wikipedia.org/wiki/金融数学 "wikilink")。

## 定义

### 離散時間鞅

离散时间**鞅**是对於所有 n 都满足

\[\mathbf{E} ( \vert X_n \vert )< \infty\]

\[\mathbf{E} (X_{n+1}\mid X_1,\ldots,X_n)=X_n,\quad n\in \mathbb N,\]

的时间离散的随机过程
X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…，也就是说，已知之前所有观测值，若下一次观测值的条件[期望等於本次观测值](https://zh.wikipedia.org/wiki/期望 "wikilink")，则称这一随机过程（即[随机变量](../Page/随机变量.md "wikilink")[序列](../Page/序列.md "wikilink")）是离散时间鞅。

### 關於隨機過程的離散時間鞅

相对来说更为一般的定义如下：若对於所有 n 都满足

\[\mathbf{E} ( \vert Y_n \vert )< \infty\]

\[\mathbf{E} (Y_{n+1}\mid X_1,\ldots,X_n)=Y_n,\quad n\in \mathbb N,\]

则称随机过程 Y<sub>1</sub>，Y<sub>2</sub>，Y<sub>3</sub>，…是关於另一随机过程
X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…的鞅。

### 連續時間鞅

与离散时间鞅的定义相似，连续时 间鞅的定义为：若对於所有 t 都满足

\[\mathbf{E} ( \vert Y_t \vert )<\infty\]

\[\mathbf{E} ( Y_{t} \mid \{ X_{\tau}, \tau \leq s \} ) = Y_s, \ \forall\ s \leq t,\]

则称关於随机过程 X<sub>t</sub> 的连续时间鞅是随机过程 Y<sub>t</sub> 。

上述定义表达了鞅的性质，即在 s ≤ t 的条件下，已知时刻 s 以及之前所有时刻的观测值，若时刻 t 的观测值的条件期望等於时刻 s
的观测值，则随机过程是鞅。

### 廣義的定義

更為一般性的定义如下：若随机过程 \(Y:T\times \Omega \to S\)满足如下性质，则稱 Y 是一個关於滤链
Σ<sub>∗</sub>和概率测度 P 的鞅。

  - Σ<sub>∗</sub> 是给定[概率空間](../Page/概率空間.md "wikilink") (Ω, Σ, **P**) 的；
  - Y 是[适应於滤链](../Page/适应过程.md "wikilink") Σ<sub>∗</sub>
    的适应过程，即对於[指标集](https://zh.wikipedia.org/wiki/指标集 "wikilink")
    T 中的每一 t ，随机变量 Y<sub>t</sub> 是一个 Σ<sub>t</sub>
    [可测函数](../Page/可测函数.md "wikilink")；
  - 对於任意 t ，Y<sub>t</sub> 存在於 [L<sup>p</sup>
    空间](../Page/Lp空间.md "wikilink")
    L<sup>1</sup>(Ω, Σ<sub>*t*</sub>, **P**; S) 中，即

\[\mathbf{E}_{\mathbf{P}} ( | Y_{t} | ) < + \infty;\]

  - 对於所有 s 和 t （s \< t ）和所有 F ∈ Σ<sub>*s*</sub>，

\[\mathbf{E}_{\mathbf{P}} \left([Y_t-Y_s]\chi_F\right)=0,\]

  -
    其中 χ<sub>F</sub> 表示事件 F 的[指示函数](../Page/指示函数.md "wikilink")。在
    Grimmett 和 Stirzaker 的《*Probability and Random
    Processes*》一书中，最後一个条件被表示为[条件期望的一般形式](../Page/条件期望.md "wikilink")\[2\]：
    \[Y_s = \mathbf{E}_{\mathbf{P}} ( Y_t | \Sigma_s ),\]

要注意的重点是鞅成立的性质与滤链以及关於选定期望的[概率测度都有关](https://zh.wikipedia.org/wiki/概率测度 "wikilink")。Y
可能是某一测度的鞅，但不是另一测度的鞅；而要说明某一[伊藤过程是鞅](https://zh.wikipedia.org/wiki/伊藤过程 "wikilink")，则可以利用找出相关的测度。

## 鞅的例子

  - 设 X<sub>n</sub> 是一个赌徒 n
    次抛掷[公平硬币後的财产](https://zh.wikipedia.org/wiki/公平硬币 "wikilink")，規則是如果硬币正面朝上，则赌徒赢得
    1 美元，硬币反面朝上，则赌徒输掉 1
    美元。在已知過去不同時刻所拥有的财产之下，下一次试验後赌徒财产的条件期望与其现在的财产相等，故这一随机过程是鞅。这个例子称为[賭徒謬誤](../Page/賭徒謬誤.md "wikilink")。

<!-- end list -->

  - 令 Y<sub>n</sub> = X<sub>n</sub><sup>2</sup> − n ，其中 X<sub>n</sub>
    是上例中赌徒的财产，则随机过程{ Y<sub>n</sub> : n = 1, 2, 3, ...
    }是鞅。这一例子可以表明赌徒的全部收益或损失大致在抛掷次数的正负[平方根之间变化](../Page/平方根.md "wikilink")。

<!-- end list -->

  - （[棣莫弗鞅](https://zh.wikipedia.org/wiki/棣莫弗 "wikilink")）设抛掷的是有偏硬币（或称为不公平硬币），正面向上的概率为
    p，反面向上的概率为 q = 1 − p 。令

\[X_{n+1}=X_n\pm 1\]

  -
    正面情况用“+”，反面情况用“−”。令

\[Y_n=(q/p)^{X_n},\]

  -
    则{ Y<sub>n</sub> : n = 1, 2, 3, ... }是关於{ X<sub>n</sub> : n = 1, 2,
    3, ... }的鞅。证明如下：
    :<math>

\\begin{align} E\[Y_{n+1} \\mid X_1,\\dots,X_n\] & = p (q/p)^{X_n+1}
+ q (q/p)^{X_n-1} \\\\ & = p (q/p) (q/p)^{X_n} + q (p/q) (q/p)^{X_n}
\\\\ & = q (q/p)^{X_n} + p (q/p)^{X_n} = (q/p)^{X_n}=Y_n.
\\end{align} </math>

[Comp-Comp-Poisson-Pro.png](https://zh.wikipedia.org/wiki/File:Comp-Comp-Poisson-Pro.png "fig:Comp-Comp-Poisson-Pro.png")

  - （[波利亞罐子模型](https://zh.wikipedia.org/wiki/喬治·波利亞 "wikilink")）一个罐子中最初装有
    r 个红球和 b 个蓝球。某人随机取出一个球，然後将此球与另一个与此球颜色相同的球放回罐子中。令 X<sub>n</sub>
    为[重复上述步骤](../Page/迭代.md "wikilink") n 次後罐子中的红球数，令
    Y<sub>n</sub> = X<sub>n</sub> / (n + r + b)。这时随机过程{ Y<sub>n</sub> :
    n = 1, 2, 3, ... }是鞅。

<!-- end list -->

  - （[统计学中的](../Page/统计学.md "wikilink")[似然比检验](https://zh.wikipedia.org/wiki/似然比检验 "wikilink")）某一总体可能是按照概率密度
    f 分布，也可能是按照概率密度 g
    分布。从总体中取出一个[随机样本](https://zh.wikipedia.org/wiki/随机样本 "wikilink")，数据为
    X<sub>1</sub>, ..., X<sub>n</sub> 。令 Y<sub>n</sub> 为“似然比”：

\[Y_n=\prod_{i=1}^n\frac{g(X_i)}{f(X_i)}\]

  -
    （上式在应用中用作检验统计量。）若总体实际上是按照概率密度 f 而不是 g 分布，则{ Y<sub>n</sub>
    : n = 1, 2, 3, ... }是关於{ X<sub>n</sub> : n = 1, 2, 3, ... }的鞅。

<!-- end list -->

  - 设每一[變形蟲不是以概率](../Page/變形蟲.md "wikilink") p 分裂成两个变形虫，就是以概率 1 − p
    最终死亡。令 X<sub>n</sub> 为 n 代後变形虫的存活数目（若种群在某一时刻灭绝，则这一时刻的
    X<sub>n</sub> = 0）。令 r 为。（找出 r 关於 p
    的函数在实际应用中是非常有用的。提示：已知最初的一个变形虫已经分裂了，则这个变形虫的後代最终灭绝的概率等於其分裂直接得到的两个後代中任何一个死亡的概率。）则

\[\{\,r^{X_n}:n=1,2,3,\dots\,\}\]

  -
    是关於{ X<sub>n</sub> : n = 1, 2, 3, ... }的鞅。

[Martingale1.svg](https://zh.wikipedia.org/wiki/File:Martingale1.svg "fig:Martingale1.svg")

  - 一个大小固定生态系统中，任一特定物种的个体数量都是一个（离散）时间函数，可被视为一个随机过程（随机变量序列）。这一随机过程是下的鞅。

<!-- end list -->

  - 若{ N<sub>t</sub> : t ≥ 0
    }是强度为λ的[泊松过程](../Page/泊松过程.md "wikilink")，则补偿泊松过程{
    N<sub>t</sub> − λt : t ≥ 0
    }是具有[右连续且有左极限的样本轨道的连续时间鞅](../Page/右连左极函数.md "wikilink")（更确切地说是[局部鞅](https://zh.wikipedia.org/wiki/局部鞅 "wikilink")）。

<!-- end list -->

  - 利用计算机软件，鞅序列可以很容易地制作出来：
      - [Microsoft
        Excel或类似的电子制表软件](../Page/Microsoft_Excel.md "wikilink")：在A1（左上角）单元格中输入0.0，在下方的A2单元格中输入`=A1+NORMINV(RAND(),0,1)`。这时下拉复制此单元格，得到大约300个单元格，这样就能创建均值为0，标准差为1的鞅序列。在这些单元格仍处於选中状态的情况下，利用图表创建工具创建这些值的图表。这时每次重新计算後（在Excel中可按F9实现），图表都会显示出不同的鞅序列。
      - [R语言](../Page/R语言.md "wikilink")：若要再现上述例子，可运行如下命令。若要显示另一个鞅，重新输入如下命令即可。
          -
            `plot(cumsum(rnorm(100, mean=0, sd=1)), t="l",
            col="darkblue", lwd=3)`

## 下鞅与上鞅

（离散时间）**下鞅**（submartingale，又称**亚鞅**）是满足

\[{}E[X_{n+1}|X_1,\ldots,X_n] \ge X_n,\quad n\in \mathbb N\]

的[可积随机过程](../Page/积分.md "wikilink")
X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…。

类似地，（离散时间）**上鞅**（supermartingale，又称**超鞅**）是满足

\[{}E[X_{n+1}|X_1,\ldots,X_n] \le X_n,\quad n\in \mathbb N\]

的[可积随机过程](../Page/积分.md "wikilink")
X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…。

下鞅或上鞅的定义都可由前述的离散时间和连续时间鞅的更为一般的定义转换得到，只需将条件期望的等式代换成不等式即可。

这里给出一个区分下鞅和上鞅的记忆方法：“生活是一个上鞅：随着时间的推进，期望降低。”

### 例子

  - 每一个鞅既是下鞅又是上鞅，反过来任何既是下鞅又是上鞅的随机过程是鞅。
  - 再次考虑赌徒的例子，若硬币正面向上，赌徒赢得1美元，若硬币反面向上，赌徒输掉1美元。设此时硬币是有偏的，则硬币正面向上的概率为*p* 。
      - 若 p 等於 1/2，平均起来，赌徒既未赢钱也未输钱，则随着时间的流逝，赌徒的财产是一个鞅。
      - 若 p 小於 1/2，平均起来，赌徒输了钱，则随着时间的流逝，赌徒的财产是一个上鞅。
      - 若 p 大於 1/2，平均起来，赌徒赢了钱，则随着时间的流逝，赌徒的财产是一个下鞅。
  - 由[延森不等式求出的鞅的](../Page/延森不等式.md "wikilink")[凸函数](../Page/凸函数.md "wikilink")（convex
    function）是下鞅。例如，公平硬币博弈中赌徒财产的平方是下鞅（同时也是根据 X<sub>n</sub><sup>2</sup> −
    n 是鞅的事实得出的）。类似地，鞅的[凹函数](../Page/凹函数.md "wikilink")（concave
    function）是一个上鞅。

## 鞅与停时

关於随机过程 X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…
的[停时是随机变量](../Page/停时.md "wikilink")
τ，这一随机变量具有如下性质：对於每一個時間 ，事件 τ = t
的发生与否仅取决於
X<sub>1</sub>，X<sub>2</sub>，X<sub>3</sub>，…，X<sub>t</sub>
的取值。从定义中可以感受到的直觉是在任一特定时刻
t，我们都可以知道在这一时刻随机过程是否到了停时。现实生活中停时的例子如赌徒离开赌桌的时刻，这一时刻可能是赌徒以前赢得钱财的函数（例如，仅当他没有钱时，他才可能离开赌桌），但是他不可能根据还未完成的博弈的结果来选择离开还是留下。

上述停时定义满足强条件，下面给出一个弱条件的停时定义：若事件 τ = t
的发生与否[統計獨立於](https://zh.wikipedia.org/wiki/統計獨立性 "wikilink")
X<sub>t+1</sub>，X<sub>t+2</sub>，… 但并不是完全决定於时刻 t 以及之前的过程历史，则随机变量 τ
是停时。虽然这是一个弱条件，但在需要用到停时的证明中的一些情况也算是足够强的条件。

鞅的一个基本性质是若\((X_t)_{t>0}\)是下\\上鞅且 \(\tau\)是停时，由
\(X_t^\tau:=X_{\min\{\tau,t\}}\)定义的对应停止过程 \((X_t^\tau)_{t>0}\)也是下\\上鞅。

停时鞅的概念引出了一系列定理，例如[可选停止定理](https://zh.wikipedia.org/wiki/可选停止定理 "wikilink")（又称可选抽样定理）：在特定条件下，停时的鞅的期望值等於其初始值。利用这一定理，我们可以证明对於一个寿命有限且房产有限的赌徒，成功的投注策略不可能存在。

## 参见

  - [Azuma不等式](https://zh.wikipedia.org/wiki/Azuma不等式 "wikilink")
  - [布朗运动](../Page/布朗运动.md "wikilink")
  - [鞅中央极限定理](https://zh.wikipedia.org/wiki/鞅中央极限定理 "wikilink")
  - [鞅表述定理](https://zh.wikipedia.org/wiki/鞅表述定理 "wikilink")
  - [Doob鞅](https://zh.wikipedia.org/wiki/Doob鞅 "wikilink")
  - [Doob鞅收敛定理](https://zh.wikipedia.org/wiki/Doob鞅收敛定理 "wikilink")
  - [局部鞅](https://zh.wikipedia.org/wiki/局部鞅 "wikilink")
  - [半鞅](https://zh.wikipedia.org/wiki/半鞅 "wikilink")

## 参考文献

### 脚注

### 参考书目

  -
  -
  - 平装

  - [有关鞅的演示文稿讲义](https://web.archive.org/web/20180219020828/http://www.corelab.ece.ntua.gr/courses/rand-alg/slides/Martingales-Stopping_Times.pdf)

[Category:随机过程](https://zh.wikipedia.org/wiki/Category:随机过程 "wikilink")
[Category:鞅论](https://zh.wikipedia.org/wiki/Category:鞅论 "wikilink")
[Category:博弈论](https://zh.wikipedia.org/wiki/Category:博弈论 "wikilink")

1.
2.